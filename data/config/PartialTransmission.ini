; PartialTransmission - Template basic config file
; Assets:
;  . bonus_01.png by Nicolas Rivi√®re, made for Dstroy 2, used with author's permission

[Display]
Title           = PartialTransmission
ScreenWidth     = 1920
ScreenHeight    = 1080

[Resource]
Texture         = ../data/texture

[Input]
KEY_ESCAPE      = Quit
KEY_ENTER       = Reload

[Scene]

[Viewport]
Size            = (0.25, 0.5)
UseRelativeSize = true

[Camera]
FrustumWidth    = 480
FrustumHeight   = 540
FrustumFar      = 2
FrustumNear     = 0
Zoom            = 4
Position        = (0, 0, -1) ; Objects with -1 <= Z <= 1 will be visible


; --- Stage ---
[Stage]
OnPrepare       = > @, Config.AppendValue < ChildList StageTitle
OnCreate        = > Object.GetName ^, > Get < Viewport, > Viewport.Create <, > Object.GetName ^, Set < ViewportID <
OnDelete        = > Object.GetName ^, > Get < ViewportID, Viewport.Delete <

[StageTitle]
Graphic         = @
Text            = @
Color           = black
Pivot           = top center
Scale           = 0.5
Position        = top -> top (0, -60)
OnCreate        = > Object.GetOwner ^, > Object.GetName <, Object.SetText ^ <


; --- Random/Base Object ---
[RandomObject]
OnPrepare       = > Get RandomObject List, Config.SetParent RandomObject <
List            = Strawberry # Tomato # RedPepper # Mushroom # Glove # Shoe # Feather # YellowPepper # Bag

[Object]
AnimationSet    = @
StartAnim       = Idle
Idle            = 6
Texture         = bonus_01.png
Pivot           = center
FrameSize       = (16, 16)
KeyDuration     = 0.1

[Idle1]
KeyDuration     = 2

[Strawberry@Object]
Name            = Strawberry

[Tomato@Object]
Name            = Tomato
TextureOrigin   = (0, 16)

[RedPepper@Object]
Name            = RedPepper
TextureOrigin   = (0, 32)

[Mushroom@Object]
Name            = Mushroom
TextureOrigin   = (0, 48)

[Glove@Object]
Name            = Glove
TextureOrigin   = (0, 64)

[Shoe@Object]
Name            = Shoe
TextureOrigin   = (0, 80)

[Feather@Object]
Name            = Feather
TextureOrigin   = (0, 96)

[YellowPepper@Object]
Name            = YellowPepper
TextureOrigin   = (0, 112)

[Bag@Object]
Name            = Bag
TextureOrigin   = (0, 128)


[Wobble]
SlotList        = @
Loop            = true
Type            = scale
Curve           = sine
EndValue        = 0.5
EndTime         = 2

[Move]
SlotList        = @
Loop            = true
Type            = position
Curve           = sine
EndValue        = (0, -20)
EndTime         = 3


; --- Plain Shadow ---
[Scene]
ChildList      += Shadow

[Shadow@Stage]
Group           = Shadow
ChildList       = ShadowObject
Viewport        = ShadowViewport

[ShadowViewport@Viewport]
Camera          = ShadowCamera
BackgroundColor = steel blue

[ShadowCamera@Camera]
GroupList       = @Shadow.Group

[ShadowObject@RandomObject]
ChildList       = ShadowChild
AngularVelocity = 90

[ShadowChild]
OnPrepare       = > Config.GetParent RandomObject, Config.SetParent ShadowChild <
Color           = (0, 0, 0)
Alpha           = 0.75
Position        = (2, 4, 0.1)


; --- Ignore + Shadow ---
[Scene]
ChildList      += Shadow+Ignore

[Shadow+Ignore@Stage]
Group           = Shadow+Ignore
ChildList       = Shadow+IgnoreObject
Viewport        = Shadow+IgnoreViewport

[Shadow+IgnoreViewport@Viewport]
Camera          = Shadow+IgnoreCamera
BackgroundColor = light steel blue
Position        = (480, 0)

[Shadow+IgnoreCamera@Camera]
GroupList       = @Shadow+Ignore.Group

[Shadow+IgnoreObject@ShadowObject]
ChildList       = Shadow+IgnoreChild

[Shadow+IgnoreChild@ShadowChild]
IgnoreFromParent= position.rotation


; --- Plain Label ---
[Scene]
ChildList      += Label

[Label@Stage]
Group           = Label
Viewport        = LabelViewport
ChildList       = LabelObject

[LabelViewport@Viewport]
Camera          = LabelCamera
BackgroundColor = golden rod
Position        = (0, 540)

[LabelCamera@Camera]
GroupList       = @Label.Group

[LabelObject@RandomObject]
ChildList       = LabelChild
AngularVelocity = 90
FXList          = Wobble # Move

[LabelChild]
Graphic         = @
Text            = @
OnCreate        = > Object.GetOwner ^, > Object.GetName <, > Get < Name, Object.SetText ^ <
Color           = indigo
Scale           = 0.5
Pivot           = center
Position        = top -> bottom (0, 5)


; --- Ignore + Label ---
[Scene]
ChildList      += Label+Ignore

[Label+Ignore@Stage]
Group           = Label+Ignore
ChildList       = Label+IgnoreObject
Viewport        = Label+IgnoreViewport

[Label+IgnoreViewport@Viewport]
Camera          = Label+IgnoreCamera
BackgroundColor = pale golden rod
Position        = (480, 540)

[Label+IgnoreCamera@Camera]
GroupList       = @Label+Ignore.Group

[Label+IgnoreObject@LabelObject]
ChildList       = Label+IgnoreChild

[Label+IgnoreChild@LabelChild]
IgnoreFromParent= position.rotation position.scale rotation scale
